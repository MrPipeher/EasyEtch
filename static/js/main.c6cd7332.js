(()=>{var e={9775:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>Y});var n=r(1823),o=r(885),i=r(5004),l=r(2481),a=(0,r(4541).initializeApp)({apiKey:"AIzaSyBQuUaG_jhfDZpKTdEX2bDQi184lRiBFzg",authDomain:"easyetch-2764f.firebaseapp.com",projectId:"easyetch-2764f",storageBucket:"easyetch-2764f.appspot.com",messagingSenderId:"429626063303",appId:"1:429626063303:web:e163bac12113c7b43c01e2"}),s=(0,l.getAuth)(a),u=r(2629),c=(0,i.createContext)(),f=function(){return(0,i.useContext)(c)},d=function(e){var t=e.children,r=e.serverURL;return(0,u.jsx)(c.Provider,{value:r,children:t})},p=r(2982),h=r(4942),g=r(5861);function y(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function j(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?y(Object(r),!0).forEach((function(t){(0,h.default)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):y(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var v=(0,i.createContext)(),x=function(){return(0,i.useContext)(v)},b=function(e){var t=e.children,r=e.profileOwner,n=(0,i.useState)([]),l=(0,o.default)(n,2),a=l[0],s=l[1],c=(0,i.useState)(null),d=(0,o.default)(c,2),h=d[0],y=d[1],x=(0,i.useState)(null),b=(0,o.default)(x,2),m=b[0],P=b[1],O=f(),S=function(){var e=(0,g.default)((function*(e){try{var t=yield fetch(`${O}/profiles?profileOwner=${e}`);if(!t.ok)throw new Error(`HTTP error! status: ${t.status}`);return yield t.json()}catch(r){throw console.error("Error fetching profiles:",r),r}}));return function(t){return e.apply(this,arguments)}}(),C=function(){var e=(0,g.default)((function*(e){try{var t=yield fetch(`${O}/credits?profileOwner=${e}`);if(!t.ok)throw new Error(`HTTP error! status: ${t.status}`);return yield t.json()}catch(r){throw console.error("Error fetching profiles:",r),r}}));return function(t){return e.apply(this,arguments)}}(),w=function(){var e=(0,g.default)((function*(){try{var e=yield C(r);P(e)}catch(t){console.error("Error reloading credits:",t)}}));return function(){return e.apply(this,arguments)}}(),E=function(){var e=(0,g.default)((function*(e){try{var t=yield fetch(`${O}/createprofile`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(j({profileOwner:r},e))}),n=yield t.json();t.ok?(console.log("Profile created successfully:",n),s([].concat((0,p.default)(a),[n])),y(n)):console.error("Error creating profile:",n.error)}catch(o){console.error("Error creating profile:",o)}}));return function(t){return e.apply(this,arguments)}}(),T=function(){var e=(0,g.default)((function*(e){try{if((yield fetch(`${O}/updateprofile`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({profileOwner:r,profileId:e.profileId,updatedProfileData:e})})).ok){console.log("Profile updated successfully!");var t=a.map((function(t){return t.profileId===e.profileId?e:t}));s(t),y(e)}else console.error("Failed to update profile")}catch(n){console.error("Error updating profile:",n)}}));return function(t){return e.apply(this,arguments)}}(),I=function(){var e=(0,g.default)((function*(e){try{if((yield fetch(`${O}/deleteprofile`,{method:"DELETE",headers:{"Content-Type":"application/json"},body:JSON.stringify({profileOwner:r,profileId:e})})).ok){console.log("Profile deleted successfully!");var t=a.filter((function(t){return t.profileId!==e}));s(t),h&&h.profileId===e&&y(t.length>0?t[0]:null)}else console.error("Failed to delete profile")}catch(n){console.error("Error deleting profile:",n)}}));return function(t){return e.apply(this,arguments)}}();return(0,i.useEffect)((function(){var e=function(){var e=(0,g.default)((function*(){try{var e=yield S(r);s(e),e.length>0&&y(e[0]);var t=yield C(r);P(t)}catch(n){console.error("Error fetching profiles:",n)}}));return function(){return e.apply(this,arguments)}}();e()}),[r]),(0,u.jsx)(v.Provider,{value:{profileOwner:r,profiles:a,credits:m,selectedProfile:h,setCredits:P,reloadCredits:w,setSelectedProfile:y,createProfile:E,updateProfile:T,deleteProfile:I},children:t})},m=r(5705),P=r(566),O=r(4439),S=r(9385),C=r(1054),w=r(6591),E=r(3693),T=r(6792),I=r(1318),N=T.default.create({container:{flex:1,justifyContent:"center",alignItems:"center"},input:{width:"80%",marginVertical:10,padding:10,borderWidth:1,borderColor:"#ccc",borderRadius:5}});const k=function(){var e=(0,I.useNavigation)(),t=(0,i.useState)(""),r=(0,o.default)(t,2),n=r[0],a=r[1],c=(0,i.useState)(""),f=(0,o.default)(c,2),d=f[0],p=f[1],h=function(){var e=(0,g.default)((function*(){try{var e=s;yield(0,l.signInWithEmailAndPassword)(e,n,d)}catch(t){console.error("Error signing in:",t)}}));return function(){return e.apply(this,arguments)}}();return(0,u.jsxs)(S.default,{style:N.container,children:[(0,u.jsx)(C.default,{children:"Sign In"}),(0,u.jsx)(w.default,{style:N.input,placeholder:"Email",onChangeText:function(e){return a(e)},value:n,autoCapitalize:"none"}),(0,u.jsx)(w.default,{style:N.input,placeholder:"Password",onChangeText:function(e){return p(e)},value:d,secureTextEntry:!0}),(0,u.jsx)(E.default,{title:"Sign In",onPress:h}),(0,u.jsx)(E.default,{title:"Go Back",onPress:function(){e.navigate("Welcome")}})]})};var D=T.default.create({container:{flex:1,justifyContent:"center",alignItems:"center"},input:{width:"80%",marginVertical:10,padding:10,borderWidth:1,borderColor:"#ccc",borderRadius:5}});const G=function(){var e=(0,I.useNavigation)(),t=(0,i.useState)(""),r=(0,o.default)(t,2),n=r[0],l=r[1],a=(0,i.useState)(""),s=(0,o.default)(a,2),c=s[0],d=s[1],p=f(),h=function(){var e=(0,g.default)((function*(){try{(yield fetch(`${p}/signup`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:n,password:c})}))?y():console.error("Error signing up on server:",errorData.error)}catch(e){console.error("Error signing up:",e)}}));return function(){return e.apply(this,arguments)}}(),y=function(){e.navigate("Welcome")};return(0,u.jsxs)(S.default,{style:D.container,children:[(0,u.jsx)(C.default,{children:"Sign Up"}),(0,u.jsx)(w.default,{style:D.input,placeholder:"Email",onChangeText:function(e){return l(e)},value:n,autoCapitalize:"none"}),(0,u.jsx)(w.default,{style:D.input,placeholder:"Password",onChangeText:function(e){return d(e)},value:c,secureTextEntry:!0}),(0,u.jsx)(E.default,{title:"Sign Up",onPress:h}),(0,u.jsx)(E.default,{title:"Go Back",onPress:y})]})};var B=T.default.create({container:{flex:1,justifyContent:"center",alignItems:"center"},buttonContainer:{marginTop:20}});const W=function(){var e=(0,I.useNavigation)();return(0,u.jsxs)(S.default,{style:B.container,children:[(0,u.jsx)(C.default,{children:"Welcome to Our App!"}),(0,u.jsxs)(S.default,{style:B.buttonContainer,children:[(0,u.jsx)(E.default,{title:"Sign Up",onPress:function(){e.navigate("SignUp")}}),(0,u.jsx)(E.default,{title:"Sign In",onPress:function(){e.navigate("SignIn")}})]})]})};var $=r(3645),U=r(3224),_=r(5288);const A=function(e){var t=e.dispositions,r=e.selectedDispositions,n=e.toggleDisposition,l=(0,i.useState)(""),a=(0,o.default)(l,2),s=a[0],c=a[1],f=t.filter((function(e){return e.toLowerCase().includes(s.toLowerCase())}));return(0,u.jsxs)(S.default,{style:{flex:1},children:[(0,u.jsx)(w.default,{style:{height:40,borderColor:"gray",borderWidth:1,margin:10,padding:10},placeholder:"Search Dispositions...",onChangeText:c,value:s}),(0,u.jsx)(U.default,{children:f.map((function(e,t){return(0,u.jsx)(_.default,{style:[F.dispositionButton,r.includes(e)&&F.selectedDispositionButton],onPress:function(){return n(e)},children:(0,u.jsx)(C.default,{children:e})},t)}))})]})};var F={dispositionButton:{padding:10,margin:5,borderWidth:1,borderColor:"black",borderRadius:5},selectedDispositionButton:{backgroundColor:"lightblue"}};n.NativeWindStyleSheet.create({styles:{flex:{display:"flex"}}});var J=["Bright","Flat","Subdued","Aggressive","Happy","Playful","Exhausted","Confused","Defiant","Ecstatic","Suspicious","Disgusted","Angry","Sad","Frightened","Depressed","Bored","Talkative","Shy","Overwhelmed","Lonely","Enraged","Frustrated","Calm"];T.default.create({dispositionButton:{padding:10,marginVertical:5,borderRadius:5,backgroundColor:"#eaeaea",alignItems:"center"},selectedDispositionButton:{backgroundColor:"lightblue"}});const R=function(){var e=f(),t=x(),r=t.profiles,n=t.selectedProfile,a=t.setSelectedProfile,c=t.profileOwner,d=t.credits,h=t.setCredits,y=(0,I.useNavigation)(),j=(0,i.useState)(null),v=(0,o.default)(j,2),b=v[0],m=v[1],P=(0,i.useState)([]),O=(0,o.default)(P,2),w=O[0],T=O[1],N=function(){var e=(0,g.default)((function*(){try{var e=s;yield(0,l.signOut)(e)}catch(t){console.error("Error signing out:",t)}}));return function(){return e.apply(this,arguments)}}(),k=function(){var t=(0,g.default)((function*(){if(0!==w.length)try{var t=yield fetch(`${e}/generate?profileOwner=${c}`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({selectedProfile:n,selectedDispositions:w})}),r=yield t.json();r?(m(String(r.generatedText)),h(r.remainingCredits),T([])):console.error("Error:",r.error)}catch(o){console.error("Error sending selected profile to server:",o)}else console.error("Error: Please select at least one disposition.")}));return function(){return t.apply(this,arguments)}}();return(0,u.jsxs)(S.default,{style:{flex:1,padding:20},children:[(0,u.jsx)(C.default,{children:"Select a Profile:"}),(0,u.jsx)($.default,{data:r,keyExtractor:function(e){return e.profileId},renderItem:function(e){var t=e.item;return(0,u.jsx)(E.default,{title:t.profileName,onPress:function(){a(t)},disabled:t===n})}}),(0,u.jsx)(A,{dispositions:J,selectedDispositions:w,toggleDisposition:function(e){var t=w.includes(e)?w.filter((function(t){return t!==e})):[].concat((0,p.default)(w),[e]);T(t)}}),(0,u.jsx)(U.default,{children:b?(0,u.jsx)(C.default,{children:b}):(0,u.jsx)(C.default,{children:"No output generated yet."})}),n&&(0,u.jsxs)(S.default,{children:[(0,u.jsx)(E.default,{title:"Generate!",onPress:k}),(0,u.jsxs)(C.default,{children:["Credits: ",d]}),(0,u.jsx)(E.default,{title:"Purchase!",onPress:function(){y.navigate("Purchase")}}),(0,u.jsxs)(C.default,{children:["Profile Gender: ",n.profileGender]}),(0,u.jsxs)(C.default,{children:["Profile Goals: ",n.profileGoals]}),(0,u.jsxs)(C.default,{children:["Profile Intervention: ",n.profileIntervention]}),(0,u.jsxs)(C.default,{children:["Profile Objective: ",n.profileObjective]}),(0,u.jsxs)(C.default,{children:["Profile Name: ",n.profileName]})]}),(0,u.jsx)(C.default,{children:"Top of the morning!"}),(0,u.jsx)(E.default,{title:"Sign Out",onPress:N})]})};var L=r(8156);const z=function(e){var t=e.route.params.checkoutUrl,r=(0,i.useState)(null),n=(0,o.default)(r,2),l=n[0],a=n[1],s=(0,I.useNavigation)();return(0,i.useEffect)((function(){var e=function(){var e=(0,g.default)((function*(){try{var e=yield L.openBrowserAsync(t);a(e)}catch(r){console.error(r)}}));return function(){return e.apply(this,arguments)}}();e(),s.navigate("Purchase")}),[t]),(0,u.jsx)(S.default,{style:{flex:1},children:(0,u.jsx)(C.default,{children:l&&JSON.stringify(l)})})};n.NativeWindStyleSheet.create({styles:{flex:{display:"flex"}}});const M=function(){var e=x(),t=e.profileOwner,r=e.reloadCredits,n=(0,I.useNavigation)(),o=f(),i=function(){var e=(0,g.default)((function*(e){try{var r=yield fetch(`${o}/checkout`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({productTitle:e,profileOwner:t})}),i=yield r.json();i.url?n.navigate("StripeCheckout",{checkoutUrl:i.url}):console.log("Unable to connect to stripe.")}catch(l){console.error("Error during checkout:",l)}}));return function(t){return e.apply(this,arguments)}}(),l=function(){var e=(0,g.default)((function*(){try{yield r(),n.navigate("Generate")}catch(e){console.log("Error reloading credits")}}));return function(){return e.apply(this,arguments)}}();return(0,u.jsxs)(S.default,{children:[(0,u.jsx)(E.default,{title:"1 Credit",onPress:function(){return i("Credits1")}}),(0,u.jsx)(E.default,{title:"5 Credits",onPress:function(){return i("Credits5")}}),(0,u.jsx)(E.default,{title:"15 Credits",onPress:function(){return i("Credits15")}}),(0,u.jsx)(E.default,{title:"30 Credits",onPress:function(){return i("Credits30")}}),(0,u.jsx)(E.default,{title:"Go Back",onPress:l})]})};const V=function(){var e=x().createProfile,t=(0,i.useState)(""),r=(0,o.default)(t,2),n=r[0],l=r[1],a=(0,i.useState)("male"),s=(0,o.default)(a,2),c=s[0],f=s[1],d=(0,i.useState)(""),p=(0,o.default)(d,2),h=p[0],y=p[1],j=(0,i.useState)(""),v=(0,o.default)(j,2),b=v[0],m=v[1],P=(0,i.useState)(""),O=(0,o.default)(P,2),T=O[0],I=O[1],N=function(){var t=(0,g.default)((function*(){if(n.trim()&&c.trim()&&h.trim()&&b.trim()&&T.trim()){var t={profileName:n,profileGender:c,profileObjective:h,profileIntervention:b,profileGoals:T};try{yield e(t),l(""),f("male"),y(""),m(""),I("")}catch(r){console.log("Error creating profile:",r.message)}}else console.error("All fields are required.")}));return function(){return t.apply(this,arguments)}}();return(0,u.jsxs)(S.default,{children:[(0,u.jsx)(w.default,{placeholder:"Profile Name",value:n,onChangeText:function(e){return l(e)}}),(0,u.jsx)(_.default,{onPress:function(){f((function(e){return"male"===e?"female":"male"}))},children:(0,u.jsxs)(C.default,{children:["Gender: ",c]})}),(0,u.jsx)(w.default,{placeholder:"Profile Objective",value:h,onChangeText:function(e){return y(e)}}),(0,u.jsx)(w.default,{placeholder:"Profile Intervention",value:b,onChangeText:function(e){return m(e)}}),(0,u.jsx)(w.default,{placeholder:"Profile Goals",value:T,onChangeText:function(e){return I(e)}}),(0,u.jsx)(E.default,{title:"Create",onPress:N})]})};function H(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function K(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?H(Object(r),!0).forEach((function(t){(0,h.default)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):H(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}const Q=function(){var e=x(),t=e.profiles,r=e.selectedProfile,n=e.updateProfile,o=e.deleteProfile,i=e.setSelectedProfile,l=function(){var e=(0,g.default)((function*(){try{yield n(r)}catch(e){console.error("Error updating profile:",e)}}));return function(){return e.apply(this,arguments)}}(),a=function(){var e=(0,g.default)((function*(){try{yield o(r.profileId)}catch(e){console.error("Error deleting profile:",e)}}));return function(){return e.apply(this,arguments)}}();return(0,u.jsxs)(S.default,{style:{flex:1,padding:20},children:[(0,u.jsx)(C.default,{children:"Select a Profile:"}),(0,u.jsx)($.default,{data:t,keyExtractor:function(e){return e.profileId.toString()},renderItem:function(e){var t=e.item;return(0,u.jsx)(E.default,{title:t.profileName,onPress:function(){i(t)},disabled:t===r})}}),r&&(0,u.jsxs)(S.default,{children:[(0,u.jsx)(E.default,{title:"Delete Profile",onPress:a}),(0,u.jsx)(C.default,{children:"Profile Gender:"}),(0,u.jsx)(w.default,{style:{height:40,borderColor:"gray",borderWidth:1,marginBottom:10},value:r.profileGender,onChangeText:function(e){return i(K(K({},r),{},{profileGender:e}))}}),(0,u.jsx)(C.default,{children:"Profile Goals:"}),(0,u.jsx)(w.default,{style:{height:40,borderColor:"gray",borderWidth:1,marginBottom:10},value:r.profileGoals,onChangeText:function(e){return i(K(K({},r),{},{profileGoals:e}))}}),(0,u.jsx)(C.default,{children:"Profile Intervention:"}),(0,u.jsx)(w.default,{style:{height:40,borderColor:"gray",borderWidth:1,marginBottom:10},value:r.profileIntervention,onChangeText:function(e){return i(K(K({},r),{},{profileIntervention:e}))}}),(0,u.jsx)(C.default,{children:"Profile Objective:"}),(0,u.jsx)(w.default,{style:{height:40,borderColor:"gray",borderWidth:1,marginBottom:10},value:r.profileObjective,onChangeText:function(e){return i(K(K({},r),{},{profileObjective:e}))}}),(0,u.jsx)(C.default,{children:"Profile Name:"}),(0,u.jsx)(w.default,{style:{height:40,borderColor:"gray",borderWidth:1,marginBottom:10},value:r.profileName,onChangeText:function(e){return i(K(K({},r),{},{profileName:e}))}}),(0,u.jsx)(E.default,{title:"Submit",onPress:l})]})]})};var q=(0,P.default)(),X=(0,O.default)();const Z=function(){var e=(0,i.useState)(null),t=(0,o.default)(e,2),r=t[0],n=t[1];(0,i.useEffect)((function(){var e=(0,l.onAuthStateChanged)(s,(function(e){n(e?e.email:null)}));return function(){return e()}}),[]);return(0,u.jsx)(d,{serverURL:"https://easyetch.onrender.com",children:(0,u.jsx)(m.default,{children:r?(0,u.jsx)(b,{profileOwner:r,children:(0,u.jsxs)(X.Navigator,{screenOptions:{headerShown:!1},children:[(0,u.jsx)(X.Screen,{name:"Create",component:function(){return(0,u.jsxs)(q.Navigator,{screenOptions:{headerShown:!1},children:[(0,u.jsx)(q.Screen,{name:"Generate",component:R}),(0,u.jsx)(q.Screen,{name:"Purchase",component:M}),(0,u.jsx)(q.Screen,{name:"StripeCheckout",component:z})]})}}),(0,u.jsx)(X.Screen,{name:"CreateProfile",component:V}),(0,u.jsx)(X.Screen,{name:"ViewProfile",component:Q})]})}):(0,u.jsxs)(q.Navigator,{screenOptions:{headerShown:!1},children:[(0,u.jsx)(q.Screen,{name:"Welcome",component:W}),(0,u.jsx)(q.Screen,{name:"SignUp",component:G}),(0,u.jsx)(q.Screen,{name:"SignIn",component:k})]})})})};function Y(){return(0,u.jsx)(Z,{})}n.NativeWindStyleSheet.setOutput({default:"native"})},4654:()=>{}},t={};function r(n){var o=t[n];if(void 0!==o)return o.exports;var i=t[n]={id:n,loaded:!1,exports:{}};return e[n].call(i.exports,i,i.exports,r),i.loaded=!0,i.exports}r.m=e,(()=>{var e=[];r.O=(t,n,o,i)=>{if(!n){var l=1/0;for(c=0;c<e.length;c++){for(var[n,o,i]=e[c],a=!0,s=0;s<n.length;s++)(!1&i||l>=i)&&Object.keys(r.O).every((e=>r.O[e](n[s])))?n.splice(s--,1):(a=!1,i<l&&(l=i));if(a){e.splice(c--,1);var u=o();void 0!==u&&(t=u)}}return t}i=i||0;for(var c=e.length;c>0&&e[c-1][2]>i;c--)e[c]=e[c-1];e[c]=[n,o,i]}})(),r.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return r.d(t,{a:t}),t},(()=>{var e,t=Object.getPrototypeOf?e=>Object.getPrototypeOf(e):e=>e.__proto__;r.t=function(n,o){if(1&o&&(n=this(n)),8&o)return n;if("object"===typeof n&&n){if(4&o&&n.__esModule)return n;if(16&o&&"function"===typeof n.then)return n}var i=Object.create(null);r.r(i);var l={};e=e||[null,t({}),t([]),t(t)];for(var a=2&o&&n;"object"==typeof a&&!~e.indexOf(a);a=t(a))Object.getOwnPropertyNames(a).forEach((e=>l[e]=()=>n[e]));return l.default=()=>n,r.d(i,l),i}})(),r.d=(e,t)=>{for(var n in t)r.o(t,n)&&!r.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},r.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}(),r.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),r.r=e=>{"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.nmd=e=>(e.paths=[],e.children||(e.children=[]),e),(()=>{var e={179:0};r.O.j=t=>0===e[t];var t=(t,n)=>{var o,i,[l,a,s]=n,u=0;if(l.some((t=>0!==e[t]))){for(o in a)r.o(a,o)&&(r.m[o]=a[o]);if(s)var c=s(r)}for(t&&t(n);u<l.length;u++)i=l[u],r.o(e,i)&&e[i]&&e[i][0](),e[i]=0;return r.O(c)},n=self.webpackChunkweb=self.webpackChunkweb||[];n.forEach(t.bind(null,0)),n.push=t.bind(null,n.push.bind(n))})();var n=r.O(void 0,[859],(()=>r(5530)));n=r.O(n)})();
//# sourceMappingURL=main.c6cd7332.js.map