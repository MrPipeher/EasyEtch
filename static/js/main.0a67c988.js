(()=>{var e={3725:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>he});var n=r(1823),o=r(5861),i=r(885),l=r(5004),a=r(2481),s=(0,r(4541).initializeApp)({apiKey:"AIzaSyBQuUaG_jhfDZpKTdEX2bDQi184lRiBFzg",authDomain:"easyetch-2764f.firebaseapp.com",projectId:"easyetch-2764f",storageBucket:"easyetch-2764f.appspot.com",messagingSenderId:"429626063303",appId:"1:429626063303:web:e163bac12113c7b43c01e2"}),c=(0,a.getAuth)(s),u=r(2629),f=(0,l.createContext)(),d=function(){return(0,l.useContext)(f)},p=function(e){var t=e.children,r=e.serverURL;return(0,u.jsx)(f.Provider,{value:r,children:t})},h=(0,l.createContext)(),y=function(){return(0,l.useContext)(h)},j=function(e){var t=e.children,r=e.profileOwner,n=(0,l.useState)(null),a=(0,i.default)(n,2),s=a[0],c=a[1],f=(0,l.useState)(null),p=(0,i.default)(f,2),y=p[0],j=p[1],g=d(),x=function(){var e=(0,o.default)((function*(e){try{var t=yield fetch(`${g}/common/getAccountType?profileOwner=${e}`),r=yield t.json();j(r.accountType)}catch(n){console.error("Error fetching account type:",n)}}));return function(t){return e.apply(this,arguments)}}(),v=function(){var e=(0,o.default)((function*(e,t){if(t!=y)try{var r=yield fetch(`${g}/common/changeAccountType`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({profileOwner:e,newAccountType:t})}),n=yield r.json();j(n.updatedAccountType)}catch(o){console.error("Error changing account type:",o)}}));return function(t,r){return e.apply(this,arguments)}}(),m=function(){var e=(0,o.default)((function*(e){try{var t=yield fetch(`${g}/common/credits?profileOwner=${e}`),r=yield t.json();c(r)}catch(n){console.error("Error fetching credits:",n)}}));return function(t){return e.apply(this,arguments)}}(),P=function(){var e=(0,o.default)((function*(){try{var e=yield m(r);c(e)}catch(t){console.error("Error reloading credits:",t)}}));return function(){return e.apply(this,arguments)}}();return(0,l.useEffect)((function(){var e=function(){var e=(0,o.default)((function*(){try{yield x(r),yield m(r)}catch(e){console.error("Error fetching account data:",e)}}));return function(){return e.apply(this,arguments)}}();e()}),[r]),(0,u.jsx)(h.Provider,{value:{serverURL:g,profileOwner:r,credits:s,setCredits:c,reloadCredits:P,accountType:y,changeAccountType:v},children:t})},g=r(5705),x=r(566),v=r(9385),m=r(1054),P=r(6591),O=r(3693),b=r(6792),S=r(1318),C=b.default.create({container:{flex:1,justifyContent:"center",alignItems:"center"},input:{width:"80%",marginVertical:10,padding:10,borderWidth:1,borderColor:"#ccc",borderRadius:5}});const w=function(){var e=(0,S.useNavigation)(),t=(0,l.useState)(""),r=(0,i.default)(t,2),n=r[0],s=r[1],f=(0,l.useState)(""),d=(0,i.default)(f,2),p=d[0],h=d[1],y=function(){var e=(0,o.default)((function*(){try{var e=c;yield(0,a.signInWithEmailAndPassword)(e,n,p)}catch(t){console.error("Error signing in:",t)}}));return function(){return e.apply(this,arguments)}}();return(0,u.jsxs)(v.default,{style:C.container,children:[(0,u.jsx)(m.default,{children:"Sign In"}),(0,u.jsx)(P.default,{style:C.input,placeholder:"Email",onChangeText:function(e){return s(e)},value:n,autoCapitalize:"none"}),(0,u.jsx)(P.default,{style:C.input,placeholder:"Password",onChangeText:function(e){return h(e)},value:p,secureTextEntry:!0}),(0,u.jsx)(O.default,{title:"Sign In",onPress:y}),(0,u.jsx)(O.default,{title:"Go Back",onPress:function(){e.navigate("Welcome")}})]})};var E=r(9199),T=b.default.create({container:{flex:1,justifyContent:"center",alignItems:"center"},picker:{width:"80%",marginVertical:10},input:{width:"80%",marginVertical:10,padding:10,borderWidth:1,borderColor:"#ccc",borderRadius:5}});const N=function(){var e=(0,S.useNavigation)(),t=(0,l.useState)(""),r=(0,i.default)(t,2),n=r[0],a=r[1],s=(0,l.useState)(""),c=(0,i.default)(s,2),f=c[0],p=c[1],h=(0,l.useState)("Host Home"),y=(0,i.default)(h,2),j=y[0],g=y[1],x=d(),b=function(){var e=(0,o.default)((function*(){try{(yield fetch(`${x}/common/signup`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:n,password:f,userType:j})}))?C():console.error("Error signing up on server:",errorData.error)}catch(e){console.error("Error signing up:",e)}}));return function(){return e.apply(this,arguments)}}(),C=function(){e.navigate("Welcome")};return(0,u.jsxs)(v.default,{style:T.container,children:[(0,u.jsx)(m.default,{children:"Sign Up"}),(0,u.jsxs)(E.Picker,{style:T.picker,selectedValue:j,onValueChange:function(e){return g(e)},children:[(0,u.jsx)(E.Picker.Item,{label:"Host Home",value:"Host Home"}),(0,u.jsx)(E.Picker.Item,{label:"Therapist",value:"Therapist"})]}),(0,u.jsx)(P.default,{style:T.input,placeholder:"Email",onChangeText:function(e){return a(e)},value:n,autoCapitalize:"none"}),(0,u.jsx)(P.default,{style:T.input,placeholder:"Password",onChangeText:function(e){return p(e)},value:f,secureTextEntry:!0}),(0,u.jsx)(O.default,{title:"Sign Up",onPress:b}),(0,u.jsx)(O.default,{title:"Go Back",onPress:C})]})};var I=b.default.create({container:{flex:1,justifyContent:"center",alignItems:"center"},buttonContainer:{marginTop:20}});const k=function(){var e=(0,S.useNavigation)();return(0,u.jsxs)(v.default,{style:I.container,children:[(0,u.jsx)(m.default,{children:"Welcome to Our App!"}),(0,u.jsxs)(v.default,{style:I.buttonContainer,children:[(0,u.jsx)(O.default,{title:"Sign Up",onPress:function(){e.navigate("SignUp")}}),(0,u.jsx)(O.default,{title:"Sign In",onPress:function(){e.navigate("SignIn")}})]})]})};var D=r(2982),G=r(4942);function M(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function A(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?M(Object(r),!0).forEach((function(t){(0,G.default)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):M(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var $=(0,l.createContext)(),H=function(){return(0,l.useContext)($)},B=function(e){var t=e.children,r=e.profileOwner,n=d(),a=(0,l.useState)([]),s=(0,i.default)(a,2),c=s[0],f=s[1],p=(0,l.useState)(null),h=(0,i.default)(p,2),y=h[0],j=h[1],g=(0,l.useState)(null),x=(0,i.default)(g,2),v=x[0],m=x[1],P=function(){var e=(0,o.default)((function*(e){try{var t=yield fetch(`${n}/hostHome/profiles?profileOwner=${e}`);if(!t.ok)throw new Error(`HTTP error! status: ${t.status}`);return yield t.json()}catch(r){throw console.error("Error fetching profiles:",r),r}}));return function(t){return e.apply(this,arguments)}}(),O=function(){var e=(0,o.default)((function*(e){try{var t=yield fetch(`${n}/hostHome/createprofile`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(A({profileOwner:r},e))}),o=yield t.json();t.ok?(console.log("Profile created successfully:",o),f([].concat((0,D.default)(c),[o])),j(o)):console.error("Error creating profile:",o.error)}catch(i){console.error("Error creating profile:",i)}}));return function(t){return e.apply(this,arguments)}}(),b=function(){var e=(0,o.default)((function*(e){try{if((yield fetch(`${n}/hostHome/updateprofile`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({profileOwner:r,profileId:e.profileId,updatedProfileData:e})})).ok){console.log("Profile updated successfully!");var t=c.map((function(t){return t.profileId===e.profileId?e:t}));f(t),j(e)}else console.error("Failed to update profile")}catch(o){console.error("Error updating profile:",o)}}));return function(t){return e.apply(this,arguments)}}(),S=function(){var e=(0,o.default)((function*(e){try{if((yield fetch(`${n}/hostHome/deleteprofile`,{method:"DELETE",headers:{"Content-Type":"application/json"},body:JSON.stringify({profileOwner:r,profileId:e})})).ok){console.log("Profile deleted successfully!");var t=c.filter((function(t){return t.profileId!==e}));f(t),y&&y.profileId===e&&j(t.length>0?t[0]:null)}else console.error("Failed to delete profile")}catch(o){console.error("Error deleting profile:",o)}}));return function(t){return e.apply(this,arguments)}}();return(0,l.useEffect)((function(){var e=function(){var e=(0,o.default)((function*(){try{var e=yield P(r);f(e),e.length>0&&j(e[0])}catch(t){console.error("Error fetching profiles:",t)}}));return function(){return e.apply(this,arguments)}}();e()}),[r]),(0,u.jsx)($.Provider,{value:{profileOwner:r,profiles:c,createProfile:O,updateProfile:b,deleteProfile:S,selectedProfile:y,setSelectedProfile:j,note:v,setNote:m},children:t})};function W(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function U(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?W(Object(r),!0).forEach((function(t){(0,G.default)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):W(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var F=(0,l.createContext)(),J=function(){return(0,l.useContext)(F)},L=function(e){var t=e.children,r=e.profileOwner,n=d(),a=(0,l.useState)([]),s=(0,i.default)(a,2),c=s[0],f=s[1],p=(0,l.useState)(null),h=(0,i.default)(p,2),y=h[0],j=h[1],g=(0,l.useState)(null),x=(0,i.default)(g,2),v=x[0],m=x[1],P=function(){var e=(0,o.default)((function*(e){try{var t=yield fetch(`${n}/therapist/profiles?profileOwner=${e}`);if(!t.ok)throw new Error(`HTTP error! status: ${t.status}`);return yield t.json()}catch(r){throw console.error("Error fetching profiles:",r),r}}));return function(t){return e.apply(this,arguments)}}(),O=function(){var e=(0,o.default)((function*(e){try{var t=yield fetch(`${n}/therapist/createprofile`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(U({profileOwner:r},e))}),o=yield t.json();t.ok?(f([].concat((0,D.default)(c),[o])),j(o)):console.error("Error creating profile:",o.error)}catch(i){console.error("Error creating profile:",i)}}));return function(t){return e.apply(this,arguments)}}(),b=function(){var e=(0,o.default)((function*(e){try{if((yield fetch(`${n}/therapist/updateprofile`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({profileOwner:r,profileId:e.profileId,updatedProfileData:e})})).ok){console.log("Profile updated successfully!");var t=c.map((function(t){return t.profileId===e.profileId?e:t}));f(t),j(e)}else console.error("Failed to update profile")}catch(o){console.error("Error updating profile:",o)}}));return function(t){return e.apply(this,arguments)}}(),S=function(){var e=(0,o.default)((function*(e){try{if((yield fetch(`${n}/therapist/deleteprofile`,{method:"DELETE",headers:{"Content-Type":"application/json"},body:JSON.stringify({profileOwner:r,profileId:e})})).ok){console.log("Profile deleted successfully!");var t=c.filter((function(t){return t.profileId!==e}));f(t),y&&y.profileId===e&&j(t.length>0?t[0]:null)}else console.error("Failed to delete profile")}catch(o){console.error("Error deleting profile:",o)}}));return function(t){return e.apply(this,arguments)}}();return(0,l.useEffect)((function(){var e=function(){var e=(0,o.default)((function*(){try{var e=yield P(r);f(e),e.length>0&&j(e[0])}catch(t){console.error("Error fetching profiles:",t)}}));return function(){return e.apply(this,arguments)}}();e()}),[r]),(0,u.jsx)(F.Provider,{value:{profileOwner:r,profiles:c,createProfile:O,updateProfile:b,deleteProfile:S,selectedProfile:y,setSelectedProfile:j,note:v,setNote:m},children:t})},_=r(4439),R=r(5288),Y=r(3645);const V=function(){var e=H().createProfile,t=(0,l.useState)(""),r=(0,i.default)(t,2),n=r[0],a=r[1],s=(0,l.useState)("male"),c=(0,i.default)(s,2),f=c[0],d=c[1],p=(0,l.useState)(""),h=(0,i.default)(p,2),y=h[0],j=h[1],g=(0,l.useState)(!1),x=(0,i.default)(g,2),b=x[0],S=x[1],C=(0,l.useState)(!1),w=(0,i.default)(C,2),E=w[0],T=w[1],N=(0,l.useState)(!1),I=(0,i.default)(N,2),k=I[0],G=I[1],M=(0,l.useState)(""),A=(0,i.default)(M,2),$=A[0],B=A[1],W=(0,l.useState)([]),U=(0,i.default)(W,2),F=U[0],J=U[1],L=function(){var t=(0,o.default)((function*(){if(n.trim()&&f.trim()&&y.trim()){var t={profileName:n,profileGender:f,profileGoals:y,morningMedication:b,afternoonMedication:E,nightMedication:k,activities:F};try{yield e(t),a(""),d("male"),j(""),S(!1),T(!1),G(!1),J([])}catch(r){console.log("Error creating profile:",r.message)}}else console.error("All fields are required.")}));return function(){return t.apply(this,arguments)}}();return(0,u.jsxs)(v.default,{children:[(0,u.jsx)(P.default,{placeholder:"Profile Name",value:n,onChangeText:function(e){return a(e)}}),(0,u.jsx)(R.default,{onPress:function(){d((function(e){return"male"===e?"female":"male"}))},children:(0,u.jsxs)(m.default,{children:["Gender: ",f]})}),(0,u.jsx)(P.default,{placeholder:"Profile Goals",value:y,onChangeText:function(e){return j(e)}}),(0,u.jsxs)(v.default,{children:[(0,u.jsx)(m.default,{children:"Medications:"}),(0,u.jsx)(R.default,{onPress:function(){return S(!b)},children:(0,u.jsxs)(m.default,{children:["Morning: ",b?"Yes":"No"]})}),(0,u.jsx)(R.default,{onPress:function(){return T(!E)},children:(0,u.jsxs)(m.default,{children:["Afternoon: ",E?"Yes":"No"]})}),(0,u.jsx)(R.default,{onPress:function(){return G(!k)},children:(0,u.jsxs)(m.default,{children:["Night: ",k?"Yes":"No"]})})]}),(0,u.jsxs)(v.default,{children:[(0,u.jsx)(P.default,{placeholder:"Add Activity",value:$,onChangeText:function(e){return B(e)}}),(0,u.jsx)(O.default,{title:"Add Activity",onPress:function(){$.trim()&&(J((function(e){return[].concat((0,D.default)(e),[$])})),B(""))}}),(0,u.jsx)(Y.default,{data:F,renderItem:function(e){var t=e.item,r=e.index;return(0,u.jsxs)(v.default,{style:{flexDirection:"row",justifyContent:"space-between"},children:[(0,u.jsx)(m.default,{children:t}),(0,u.jsx)(R.default,{onPress:function(){return function(e){J((function(t){return t.filter((function(t,r){return r!==e}))}))}(r)},children:(0,u.jsx)(m.default,{children:"Delete"})})]})},keyExtractor:function(e,t){return t.toString()}})]}),(0,u.jsx)(O.default,{title:"Create",onPress:L})]})};var z=r(3224);const q=function(){var e=(0,S.useNavigation)(),t=H(),r=t.profiles,n=t.selectedProfile,a=t.setSelectedProfile,s=t.note,c=t.setNote,f=y(),d=f.serverURL,p=f.profileOwner,h=f.credits,j=f.setCredits,g=(0,l.useState)(!1),x=(0,i.default)(g,2),P=x[0],b=x[1],C=function(){var e=(0,o.default)((function*(){if(0!==h)try{var e=yield fetch(`${d}/hostHome/generate?profileOwner=${p}`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({selectedProfile:n,dayProgram:P})}),t=yield e.json();t?(c(t.generatedText),j(t.remainingCredits)):console.error("Error:",t.error)}catch(r){console.error("Error sending selected profile to server:",r)}else console.error("Error: Please purchase more credits to continue.")}));return function(){return e.apply(this,arguments)}}();return(0,u.jsxs)(v.default,{style:{flex:1,padding:10},children:[(0,u.jsx)(m.default,{children:"Select a Profile:"}),(0,u.jsx)(Y.default,{data:r,keyExtractor:function(e){return e.profileId.toString()},renderItem:function(e){var t=e.item;return(0,u.jsx)(O.default,{title:t.profileName,onPress:function(){a(t)},disabled:t===n})}}),(0,u.jsx)(z.default,{children:s?(0,u.jsx)(m.default,{children:s}):(0,u.jsx)(m.default,{children:"No output generated yet."})}),n&&(0,u.jsxs)(v.default,{children:[(0,u.jsxs)(m.default,{children:["Credits: ",h]}),(0,u.jsxs)(m.default,{children:["Profile Name: ",n.profileName]}),(0,u.jsxs)(m.default,{children:["Profile Gender: ",n.profileGender]}),(0,u.jsxs)(m.default,{children:["Profile Goals: ",n.profileGoals]}),(0,u.jsxs)(m.default,{children:["Morning Medication: ",n.morningMedication?"Yes":"No"]}),(0,u.jsxs)(m.default,{children:["Afternoon Medication: ",n.afternoonMedication?"Yes":"No"]}),(0,u.jsxs)(m.default,{children:["Night Medication: ",n.nightMedication?"Yes":"No"]}),(0,u.jsx)(m.default,{children:"Activities:"}),(0,u.jsx)(Y.default,{data:n.activities,keyExtractor:function(e,t){return t.toString()},renderItem:function(e){var t=e.item;return(0,u.jsx)(m.default,{children:t})}}),(0,u.jsx)(O.default,{title:"Day Program: "+(P?"Yes":"No"),onPress:function(){b(!P)}}),(0,u.jsx)(O.default,{title:"Purchase!",onPress:function(){e.navigate("Purchase")}}),(0,u.jsx)(O.default,{title:"Generate!",onPress:C})]})]})};function K(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Q(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?K(Object(r),!0).forEach((function(t){(0,G.default)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):K(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}const X=function(){var e=H(),t=e.profiles,r=e.selectedProfile,n=e.setSelectedProfile,a=e.updateProfile,s=e.deleteProfile,c=(0,l.useState)(""),f=(0,i.default)(c,2),d=f[0],p=f[1],h=function(){var e=(0,o.default)((function*(){try{yield a(r),console.log("Profile updated successfully:",r)}catch(e){console.error("Error updating profile:",e)}}));return function(){return e.apply(this,arguments)}}(),y=function(){var e=(0,o.default)((function*(){try{yield s(r.profileId)}catch(e){console.error("Error deleting profile:",e)}}));return function(){return e.apply(this,arguments)}}();return(0,u.jsxs)(v.default,{style:{flex:1,padding:20},children:[(0,u.jsx)(m.default,{children:"Select a Profile:"}),(0,u.jsx)(Y.default,{data:t,keyExtractor:function(e){return e.profileId.toString()},renderItem:function(e){var t=e.item;return(0,u.jsx)(O.default,{title:t.profileName,onPress:function(){n(t)},disabled:t===r})}}),r&&(0,u.jsxs)(v.default,{children:[(0,u.jsx)(O.default,{title:"Delete Profile",onPress:y}),(0,u.jsx)(m.default,{children:"Profile Gender:"}),(0,u.jsxs)(v.default,{style:{flexDirection:"row"},children:[(0,u.jsx)(O.default,{title:"Male",onPress:function(){return n(Q(Q({},r),{},{profileGender:"Male"}))},disabled:"Male"===(null==r?void 0:r.profileGender)}),(0,u.jsx)(O.default,{title:"Female",onPress:function(){return n(Q(Q({},r),{},{profileGender:"Female"}))},disabled:"Female"===(null==r?void 0:r.profileGender)})]}),(0,u.jsx)(m.default,{children:"Profile Goals:"}),(0,u.jsx)(P.default,{style:{height:40,borderColor:"gray",borderWidth:1,marginBottom:10},value:r.profileGoals,onChangeText:function(e){return n(Q(Q({},r),{},{profileGoals:e}))}}),(0,u.jsx)(m.default,{children:"Profile Name:"}),(0,u.jsx)(P.default,{style:{height:40,borderColor:"gray",borderWidth:1,marginBottom:10},value:r.profileName,onChangeText:function(e){return n(Q(Q({},r),{},{profileName:e}))}}),(0,u.jsx)(m.default,{children:"Morning Medication:"}),(0,u.jsx)(O.default,{title:r.morningMedication?"Yes":"No",onPress:function(){return n(Q(Q({},r),{},{morningMedication:!r.morningMedication}))}}),(0,u.jsx)(m.default,{children:"Afternoon Medication:"}),(0,u.jsx)(O.default,{title:r.afternoonMedication?"Yes":"No",onPress:function(){return n(Q(Q({},r),{},{afternoonMedication:!r.afternoonMedication}))}}),(0,u.jsx)(m.default,{children:"Night Medication:"}),(0,u.jsx)(O.default,{title:r.nightMedication?"Yes":"No",onPress:function(){return n(Q(Q({},r),{},{nightMedication:!r.nightMedication}))}}),(0,u.jsx)(m.default,{children:"Activities:"}),(0,u.jsxs)(v.default,{style:{flexDirection:"row",marginBottom:10},children:[(0,u.jsx)(P.default,{style:{height:40,borderColor:"gray",borderWidth:1,flex:1,marginRight:10},value:d,onChangeText:function(e){return p(e)}}),(0,u.jsx)(O.default,{title:"Add",onPress:function(){""!==d.trim()&&(n(Q(Q({},r),{},{activities:[].concat((0,D.default)(r.activities),[d])})),p(""))}})]}),(0,u.jsx)(Y.default,{data:r.activities,keyExtractor:function(e,t){return t.toString()},renderItem:function(e){var t=e.item;return(0,u.jsxs)(v.default,{style:{flexDirection:"row",alignItems:"center"},children:[(0,u.jsx)(m.default,{children:t}),(0,u.jsx)(R.default,{onPress:function(){return function(e){var t=r.activities.filter((function(t){return t!==e}));n(Q(Q({},r),{},{activities:t}))}(t)},children:(0,u.jsx)(m.default,{style:{color:"red",marginLeft:10},children:"X"})})]})}}),(0,u.jsx)(O.default,{title:"Submit",onPress:h})]})]})};const Z=function(){var e=J().createProfile,t=(0,l.useState)(""),r=(0,i.default)(t,2),n=r[0],a=r[1],s=(0,l.useState)("male"),c=(0,i.default)(s,2),f=c[0],d=c[1],p=(0,l.useState)(""),h=(0,i.default)(p,2),y=h[0],j=h[1],g=(0,l.useState)(""),x=(0,i.default)(g,2),b=x[0],S=x[1],C=(0,l.useState)(""),w=(0,i.default)(C,2),E=w[0],T=w[1],N=function(){var t=(0,o.default)((function*(){if(n.trim()&&f.trim()&&y.trim()&&b.trim()&&E.trim()){var t={profileName:n,profileGender:f,profileObjective:y,profileIntervention:b,profileGoals:E};try{yield e(t),a(""),d("male"),j(""),S(""),T("")}catch(r){console.log("Error creating profile:",r.message)}}else console.error("All fields are required.")}));return function(){return t.apply(this,arguments)}}();return(0,u.jsxs)(v.default,{children:[(0,u.jsx)(P.default,{placeholder:"Profile Name",value:n,onChangeText:function(e){return a(e)}}),(0,u.jsx)(R.default,{onPress:function(){d((function(e){return"male"===e?"female":"male"}))},children:(0,u.jsxs)(m.default,{children:["Gender: ",f]})}),(0,u.jsx)(P.default,{placeholder:"Profile Objective",value:y,onChangeText:function(e){return j(e)}}),(0,u.jsx)(P.default,{placeholder:"Profile Intervention",value:b,onChangeText:function(e){return S(e)}}),(0,u.jsx)(P.default,{placeholder:"Profile Goals",value:E,onChangeText:function(e){return T(e)}}),(0,u.jsx)(O.default,{title:"Create",onPress:N})]})};const ee=function(e){var t=e.dispositions,r=e.selectedDispositions,n=e.toggleDisposition,o=(0,l.useState)(""),a=(0,i.default)(o,2),s=a[0],c=a[1],f=t.filter((function(e){return e.toLowerCase().includes(s.toLowerCase())}));return(0,u.jsxs)(v.default,{style:{flex:1},children:[(0,u.jsx)(P.default,{style:{height:40,borderColor:"gray",borderWidth:1,margin:10,padding:10},placeholder:"Search Dispositions...",onChangeText:c,value:s}),(0,u.jsx)(z.default,{children:f.map((function(e,t){return(0,u.jsx)(R.default,{style:[te.dispositionButton,r.includes(e)&&te.selectedDispositionButton],onPress:function(){return n(e)},children:(0,u.jsx)(m.default,{children:e})},t)}))})]})};var te={dispositionButton:{padding:10,margin:5,borderWidth:1,borderColor:"black",borderRadius:5},selectedDispositionButton:{backgroundColor:"lightblue"}};n.NativeWindStyleSheet.create({styles:{flex:{display:"flex"}}});var re=["Bright","Flat","Subdued","Aggressive","Happy","Playful","Exhausted","Confused","Defiant","Ecstatic","Suspicious","Disgusted","Angry","Sad","Frightened","Depressed","Bored","Talkative","Shy","Overwhelmed","Lonely","Enraged","Frustrated","Calm"];const ne=function(){var e=(0,S.useNavigation)(),t=J(),r=t.profiles,n=t.selectedProfile,a=t.setSelectedProfile,s=t.note,c=t.setNote,f=y(),d=f.serverURL,p=f.profileOwner,h=f.credits,j=f.setCredits,g=(0,l.useState)([]),x=(0,i.default)(g,2),P=x[0],b=x[1],C=function(){var e=(0,o.default)((function*(){if(0!==P.length)if(0!==h)try{var e=yield fetch(`${d}/therapist/generate?profileOwner=${p}`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({selectedProfile:n,selectedDispositions:P})}),t=yield e.json();t?(c(t.generatedText),j(t.remainingCredits),b([])):console.error("Error:",t.error)}catch(r){console.error("Error sending selected profile to server:",r)}else console.error("Error: Please purchase more credits to continue.");else console.error("Error: Please select at least one disposition.")}));return function(){return e.apply(this,arguments)}}();return(0,u.jsxs)(v.default,{style:{flex:1},children:[(0,u.jsx)(m.default,{children:"Select a Profile:"}),(0,u.jsx)(Y.default,{data:r,keyExtractor:function(e){return e.profileId.toString()},renderItem:function(e){var t=e.item;return(0,u.jsx)(O.default,{title:t.profileName,onPress:function(){a(t)},disabled:t===n})}}),(0,u.jsx)(ee,{dispositions:re,selectedDispositions:P,toggleDisposition:function(e){var t=P.includes(e)?P.filter((function(t){return t!==e})):[].concat((0,D.default)(P),[e]);b(t)}}),(0,u.jsx)(z.default,{children:s?(0,u.jsx)(m.default,{children:s}):(0,u.jsx)(m.default,{children:"No output generated yet."})}),n&&(0,u.jsxs)(v.default,{children:[(0,u.jsxs)(m.default,{children:["Credits: ",h]}),(0,u.jsxs)(m.default,{children:["Profile Name: ",n.profileName]}),(0,u.jsxs)(m.default,{children:["Profile Gender: ",n.profileGender]}),(0,u.jsxs)(m.default,{children:["Profile Goals: ",n.profileGoals]}),(0,u.jsxs)(m.default,{children:["Profile Objectives: ",n.profileObjective]}),(0,u.jsxs)(m.default,{children:["Profile Intervention: ",n.profileIntervention]}),(0,u.jsx)(O.default,{title:"Generate!",onPress:C}),(0,u.jsx)(O.default,{title:"Purchase!",onPress:function(){e.navigate("Purchase")}})]})]})};function oe(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function ie(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?oe(Object(r),!0).forEach((function(t){(0,G.default)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):oe(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}const le=function(){var e=J(),t=e.profiles,r=e.selectedProfile,n=e.setSelectedProfile,i=e.updateProfile,l=e.deleteProfile,a=function(){var e=(0,o.default)((function*(){try{var e=ie({},r);yield i(e),console.log(e)}catch(t){console.error("Error updating profile:",t)}}));return function(){return e.apply(this,arguments)}}(),s=function(){var e=(0,o.default)((function*(){try{yield l(r.profileId)}catch(e){console.error("Error deleting profile:",e)}}));return function(){return e.apply(this,arguments)}}();return(0,u.jsxs)(v.default,{style:{flex:1,padding:20},children:[(0,u.jsx)(m.default,{children:"Select a Profile:"}),(0,u.jsx)(Y.default,{data:t,keyExtractor:function(e){return e.profileId.toString()},renderItem:function(e){var t=e.item;return(0,u.jsx)(O.default,{title:t.profileName,onPress:function(){n(t)},disabled:t===r})}}),r&&(0,u.jsxs)(v.default,{children:[(0,u.jsx)(O.default,{title:"Delete Profile",onPress:s}),(0,u.jsx)(m.default,{children:"Profile Gender:"}),(0,u.jsxs)(v.default,{style:{flexDirection:"row"},children:[(0,u.jsx)(O.default,{title:"Male",onPress:function(){n(ie(ie({},r),{},{profileGender:"Male"}))},disabled:"Male"===(null==r?void 0:r.profileGender)}),(0,u.jsx)(O.default,{title:"Female",onPress:function(){n(ie(ie({},r),{},{profileGender:"Female"}))},disabled:"Female"===(null==r?void 0:r.profileGender)})]}),(0,u.jsx)(m.default,{children:"Profile Goals:"}),(0,u.jsx)(P.default,{style:{height:40,borderColor:"gray",borderWidth:1,marginBottom:10},value:r.profileGoals,onChangeText:function(e){return n(ie(ie({},r),{},{profileGoals:e}))}}),(0,u.jsx)(m.default,{children:"Profile Intervention:"}),(0,u.jsx)(P.default,{style:{height:40,borderColor:"gray",borderWidth:1,marginBottom:10},value:r.profileIntervention,onChangeText:function(e){return n(ie(ie({},r),{},{profileIntervention:e}))}}),(0,u.jsx)(m.default,{children:"Profile Objective:"}),(0,u.jsx)(P.default,{style:{height:40,borderColor:"gray",borderWidth:1,marginBottom:10},value:r.profileObjective,onChangeText:function(e){return n(ie(ie({},r),{},{profileObjective:e}))}}),(0,u.jsx)(m.default,{children:"Profile Name:"}),(0,u.jsx)(P.default,{style:{height:40,borderColor:"gray",borderWidth:1,marginBottom:10},value:r.profileName,onChangeText:function(e){return n(ie(ie({},r),{},{profileName:e}))}}),(0,u.jsx)(O.default,{title:"Submit",onPress:a})]})]})};const ae=function(){var e=y(),t=e.accountType,r=e.changeAccountType,n=e.profileOwner,i=function(e){r(n,e)},l=function(){var e=(0,o.default)((function*(){try{var e=c;yield(0,a.signOut)(e)}catch(t){console.error("Error signing out:",t)}}));return function(){return e.apply(this,arguments)}}();return(0,u.jsxs)(v.default,{style:{flex:1,justifyContent:"center",alignItems:"center"},children:[(0,u.jsxs)(m.default,{children:["Current Account Type: ",t]}),(0,u.jsx)(O.default,{title:"Change to Host Home",onPress:function(){return i("Host Home")}}),(0,u.jsx)(O.default,{title:"Change to Therapist",onPress:function(){return i("Therapist")}}),(0,u.jsx)(O.default,{title:"Sign Out",onPress:l})]})};const se=function(){var e=y(),t=e.profileOwner,r=e.reloadCredits,n=(0,S.useNavigation)(),i=d(),l=function(){var e=(0,o.default)((function*(e){try{var r=yield fetch(`${i}/common/checkout`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({productTitle:e,profileOwner:t})}),o=yield r.json();o.url?n.navigate("StripeCheckout",{checkoutUrl:o.url}):console.log("Unable to connect to stripe.")}catch(l){console.error("Error during checkout:",l)}}));return function(t){return e.apply(this,arguments)}}(),a=function(){var e=(0,o.default)((function*(){try{yield r(),n.goBack()}catch(e){console.log("Error reloading credits")}}));return function(){return e.apply(this,arguments)}}();return(0,u.jsxs)(v.default,{children:[(0,u.jsx)(O.default,{title:"1 Credit",onPress:function(){return l("Credits1")}}),(0,u.jsx)(O.default,{title:"5 Credits",onPress:function(){return l("Credits5")}}),(0,u.jsx)(O.default,{title:"15 Credits",onPress:function(){return l("Credits15")}}),(0,u.jsx)(O.default,{title:"30 Credits",onPress:function(){return l("Credits30")}}),(0,u.jsx)(O.default,{title:"Go Back",onPress:a})]})};var ce=r(8156);const ue=function(e){var t=e.route.params.checkoutUrl,r=(0,l.useState)(null),n=(0,i.default)(r,2),a=n[0],s=n[1],c=(0,S.useNavigation)();return(0,l.useEffect)((function(){var e=function(){var e=(0,o.default)((function*(){try{var e=yield ce.openBrowserAsync(t);s(e)}catch(r){console.error(r)}}));return function(){return e.apply(this,arguments)}}();e(),c.navigate("Purchase")}),[t]),(0,u.jsx)(v.default,{style:{flex:1},children:(0,u.jsx)(m.default,{children:a&&JSON.stringify(a)})})};const fe=function(){var e=y(),t=e.accountType,r=e.profileOwner,n=(0,l.useState)(!0),o=(0,i.default)(n,2),a=o[0],s=o[1];if((0,l.useEffect)((function(){null!==t&&s(!1)}),[t]),a)return(0,u.jsx)(v.default,{children:(0,u.jsx)(m.default,{children:"Loading"})});var c=(0,x.default)(),f=(0,_.default)();return"Host Home"===t?(0,u.jsx)(B,{profileOwner:r,children:(0,u.jsxs)(f.Navigator,{screenOptions:{headerShown:!1},children:[(0,u.jsx)(f.Screen,{name:"Generate",component:function(){return(0,u.jsxs)(c.Navigator,{screenOptions:{headerShown:!1},children:[(0,u.jsx)(c.Screen,{name:"CreateHostHome",component:q}),(0,u.jsx)(c.Screen,{name:"Purchase",component:se}),(0,u.jsx)(c.Screen,{name:"StripeCheckout",component:ue})]})}}),(0,u.jsx)(f.Screen,{name:"CreateProfile",component:V}),(0,u.jsx)(f.Screen,{name:"ViewProfile",component:X}),(0,u.jsx)(f.Screen,{name:"Settings",component:ae})]})}):"Therapist"===t?(0,u.jsx)(L,{profileOwner:r,children:(0,u.jsxs)(f.Navigator,{screenOptions:{headerShown:!1},children:[(0,u.jsx)(f.Screen,{name:"Generate",component:function(){return(0,u.jsxs)(c.Navigator,{screenOptions:{headerShown:!1},children:[(0,u.jsx)(c.Screen,{name:"CreateTherapist",component:ne}),(0,u.jsx)(c.Screen,{name:"Purchase",component:se}),(0,u.jsx)(c.Screen,{name:"StripeCheckout",component:ue})]})}}),(0,u.jsx)(f.Screen,{name:"CreateProfile",component:Z}),(0,u.jsx)(f.Screen,{name:"ViewProfile",component:le}),(0,u.jsx)(f.Screen,{name:"Settings",component:ae})]})}):null};var de=(0,x.default)();const pe=function(){var e=(0,l.useState)(null),t=(0,i.default)(e,2),r=t[0],n=t[1];return(0,l.useEffect)((function(){var e=(0,a.onAuthStateChanged)(c,function(){var e=(0,o.default)((function*(e){n(e?e.email:null)}));return function(t){return e.apply(this,arguments)}}());return function(){return e()}}),[]),(0,u.jsx)(p,{serverURL:"http://10.0.0.70:5000",children:(0,u.jsx)(g.default,{children:r?(0,u.jsx)(j,{profileOwner:r,children:(0,u.jsx)(fe,{})}):(0,u.jsxs)(de.Navigator,{screenOptions:{headerShown:!1},children:[(0,u.jsx)(de.Screen,{name:"Welcome",component:k}),(0,u.jsx)(de.Screen,{name:"SignUp",component:N}),(0,u.jsx)(de.Screen,{name:"SignIn",component:w})]})})})};function he(){return(0,u.jsx)(pe,{})}n.NativeWindStyleSheet.setOutput({default:"native"})},4654:()=>{}},t={};function r(n){var o=t[n];if(void 0!==o)return o.exports;var i=t[n]={id:n,loaded:!1,exports:{}};return e[n].call(i.exports,i,i.exports,r),i.loaded=!0,i.exports}r.m=e,(()=>{var e=[];r.O=(t,n,o,i)=>{if(!n){var l=1/0;for(u=0;u<e.length;u++){for(var[n,o,i]=e[u],a=!0,s=0;s<n.length;s++)(!1&i||l>=i)&&Object.keys(r.O).every((e=>r.O[e](n[s])))?n.splice(s--,1):(a=!1,i<l&&(l=i));if(a){e.splice(u--,1);var c=o();void 0!==c&&(t=c)}}return t}i=i||0;for(var u=e.length;u>0&&e[u-1][2]>i;u--)e[u]=e[u-1];e[u]=[n,o,i]}})(),r.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return r.d(t,{a:t}),t},(()=>{var e,t=Object.getPrototypeOf?e=>Object.getPrototypeOf(e):e=>e.__proto__;r.t=function(n,o){if(1&o&&(n=this(n)),8&o)return n;if("object"===typeof n&&n){if(4&o&&n.__esModule)return n;if(16&o&&"function"===typeof n.then)return n}var i=Object.create(null);r.r(i);var l={};e=e||[null,t({}),t([]),t(t)];for(var a=2&o&&n;"object"==typeof a&&!~e.indexOf(a);a=t(a))Object.getOwnPropertyNames(a).forEach((e=>l[e]=()=>n[e]));return l.default=()=>n,r.d(i,l),i}})(),r.d=(e,t)=>{for(var n in t)r.o(t,n)&&!r.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},r.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}(),r.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),r.r=e=>{"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.nmd=e=>(e.paths=[],e.children||(e.children=[]),e),(()=>{var e={179:0};r.O.j=t=>0===e[t];var t=(t,n)=>{var o,i,[l,a,s]=n,c=0;if(l.some((t=>0!==e[t]))){for(o in a)r.o(a,o)&&(r.m[o]=a[o]);if(s)var u=s(r)}for(t&&t(n);c<l.length;c++)i=l[c],r.o(e,i)&&e[i]&&e[i][0](),e[i]=0;return r.O(u)},n=self.webpackChunkweb=self.webpackChunkweb||[];n.forEach(t.bind(null,0)),n.push=t.bind(null,n.push.bind(n))})();var n=r.O(void 0,[307],(()=>r(5530)));n=r.O(n)})();
//# sourceMappingURL=main.0a67c988.js.map